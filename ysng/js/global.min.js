!function(t,n){var e={rooturl:"meizi.lc/",tplpath:"./html",index:"./html/pageone.html",jsonpath:"./json/",debug:!0,console:!0,com_del:{url:"auth/comdel",method:"POST",name:"POST方法-无分页列表"},com_add:{url:"auth/comadd",method:"POST",name:"POST方法-无分页列表"},com_lista:{url:"auth/comlist",method:"GET",name:"POST方法-无分页列表"},com_plista:{url:"auth/comlist",method:"GET",name:"GET方法-有分页列表",load:!0,page:!0},com_obja:{url:"auth/comadd",method:"GET",name:"GET方法-返回对象，如详情，添加，删除"},YS_lista:{url:"auth/comlist",method:"GET",name:"GET方法-无分页列表"},YS_plista:{url:"auth/comlist",method:"GET",name:"GET方法-有分页列表",load:!0,page:!0},YS_obja:{url:"auth/comadd",method:"POST",name:"POST方法-返回对象，如详情，添加，删除"}},a={ctrl_init:function(t){t.dealhash(location.href,t),t.init(t),t.com_lista.url="Open/prov",t.fetch("com_lista"),t.com_lista.done=function(t,n){n.fetch("com_listb")},t.com_listb.url="Open/city",t.com_listb.params={pid:17},t.ystab=0},pageone:function(t){t.YS_lista.url="abc/aa",t.fetch("YS_plista"),t.fetch("com_listb")},city:function(t){},mattertpl:function(t){t.YS_plista.url="Index/system_mattertpl_list",t.fetch("YS_plista")},tongbiao:function(t){t.YS_lista.url="Index/major_select",t.fetch("YS_lista"),t.YS_obja.url="Index/major_add",t.YS_listb.url="Index/archive_select",t.fetch("YS_listb"),t.YS_objb.url="Index/archive_add"},weather:function(t){t.YS_plista.url="Index/service_weather_list"},userlist:function(t){t.YS_plista.url="Index/operate_user_list",t.YS_plista.params.userid=123,t.fetch("YS_plista"),t.YS_plistb.page=!0,t.YS_plistb.url="Index/operate_login_list",t.YS_lista.url="Index/loginStatistic"},programcount:function(t){t.YS_plista.url="Index/operate_pro_list",t.fetch("YS_plista")}},o=angular.module("app",[]);o.filter("htmlfil",["$sce",function(t){return function(n){return t.trustAsHtml(n)}}]),o.controller("ctrl",["$scope","$http",function(n,o){n.conf=e,n.main=a,n.$http=o,n.value={},n.body={url:"",path:"",hashobj:{}},n.com_del={params:{},data:{}},n.com_add={params:{},data:{}},["a","b","c","d"].map(function(t){n["com_obj"+t]={params:{},data:{}},n["com_list"+t]={params:{},data:[]},n["com_plist"+t]={params:{listnum:10,curPage:1},data:{datalist:[]}},n["YS_list"+t]={params:{},data:[]},n["YS_plist"+t]={params:{listnum:10,curPage:1},data:{datalist:[]}},n["YS_obj"+t]={params:{},data:{}}}),n.init=function(t){["a","b","c","d"].map(function(n){t["YS_list"+n]={params:{},data:[]},t["YS_plist"+n]={params:{listnum:10,curPage:1},data:{datalist:[]}},t["YS_obj"+n]={params:{},data:{}}}),a[t.body.path]&&a[t.body.path](t)},n.dealhash=function(t,n){var a=t.split("#/");if(n.body.url=e.index,a[1]){var o=a[1].split("?");n.body.url=e.tplpath+"/"+o[0]+".html?time="+YSfac.time(),n.body.path=o[0],o[1]&&(n.body.hashobj=YSfac.hashToobj(o[1]))}},n.fetch=function(t){YSfac.fetdata(n,t)},t.onhashchange=function(){n.dealhash(location.href,n),n.init(n),n.$apply()},a.ctrl_init(n),console.log(n)}]),o.directive("ysfetch",function(){return{link:function(t,n,e){n.on("click",function(n){var a=YSfac.getscope_byid(t,2);a.fetch(e.ysfetch)})}}}),o.directive("ysenter",function(){return{link:function(t,n,e){n.on("keyup",function(n){13==n.keyCode&&t.fetch(e.ysenter)})}}}),o.directive("yschkall",function(){return{link:function(t,n,e){n.on("click",function(a){var o=e.yschkall.split("."),i=t;o.map(function(t){i=i[t]}),i.map(function(t){t.ischk=n.is(":checked")}),t.$apply()})}}}),o.directive("setvalue",function(){return{link:function(t,n,e){n.on("click",function(n){var a=e.setvalue.split("."),o=t,i="";a.map(function(t,n){n<a.length-1&&(o=o[t]),n==a.length-1&&(i=t)}),o[i]=e.value,t.$apply()})}}}),o.directive("ysaddrun",function(){return{link:function(t,n,e){n.on("click",function(n){var a=e.ysaddrun.split("."),o=t;a.map(function(t){o=o[t]}),t.com_add.done=function(t,n){1==t.code?(o.unshift(t.data),YS("layer",function(){layer.msg("成功")})):YS("layer",function(){layer.msg("失败")})},t.fetch("com_add")})}}}),o.directive("ysaddedit",function(){return{link:function(t,n,e){n.on("click",function(n){var a=e.ysadd.split("."),o=t;a.map(function(t){o=o[t]})})}}}),o.directive("ysselrun",function(){return{link:function(t,n,e){n.on("change",function(a){var o=e.ysselrun.split("."),i=t,c="";o.map(function(t,n){n<o.length-1&&(i=i[t]),n==o.length-1&&(c=t)}),i[c]=n.val(),t.fetch(o[0])})}}}),o.directive("yssel",function(){return{link:function(t,n,e){n.on("change",function(a){var o=e.yssel.split("."),i=t,c="";o.map(function(t,n){n<o.length-1&&(i=i[t]),n==o.length-1&&(c=t)}),i[c]=n.val()})}}}),o.directive("changetab",function(){return{link:function(t,n,e){n.on("click",function(n){var a=YSfac.getscope_byid(t,2);a.ystab=e.changetab,a.$apply()})}}}),o.directive("ysdel",function(){return{link:function(t,n,e){n.on("click",function(n){var a=e.ysdel.split("."),o=t;a.map(function(t){o=o[t]});var i=[];o.map(function(t){t.ischk&&i.push(t[e.delkey])}),YS("layer",function(){if(!i.length)return layer.msg("请选择删除项"),!1;var n=layer.confirm("您确定要删除么？",{btn:["确定","取消"]},function(){t.com_del.params[e.delkey]=i.join(","),t.com_del.done=function(t,n){1==t.code?(o.map(function(t){t.ischk&&(t.isdel=1)}),layer.msg("删除成功")):layer.msg("删除失败")},t.fetch("com_del"),layer.close(n)})})})}}}),o.directive("ysdelone",function(){return{link:function(t,n,e){n.on("click",function(n){var a=t;YS("layer",function(){var n=layer.confirm("您确定要删除么？",{btn:["确定","取消"]},function(){t.com_del.params[e.ysdelone]=t.value[e.ysdelone],t.com_del.done=function(t,n){1==t.code?(a.value.isdel=1,layer.msg("删除成功")):layer.msg("删除失败")},t.fetch("com_del"),layer.close(n)})})})}}}),o.directive("findtable",function(){return{link:function(t,n,e){n.on("click",function(n){var e=YSfac.getscope_byid(t,2);e.YS_listb.params.pid=t.value.pid,e.fetch("YS_listb"),e.ystab=2,e.$apply()})}}}),angular.element(document).ready(function(){angular.bootstrap(document,["app"])})}(window),function(t,n){var e={hashToobj:function(t){var n={};if(!t)return n;if(t.indexOf("&")>0){var e=t.split("&");e.map(function(t){var e=t.split("=");e.length>1?n[e[0]]=e[1]:""})}else{var a=t.split("=");a.length>1?n[a[0]]=a[1]:""}return n},time:function(t){var n=t?Date.parse(new Date(t)):Date.parse(new Date);return n},load:function(t){t?$("#loader").fadeIn(100):$("#loader").fadeOut(1e3)},fetdata:function(t,n){var a,o,i,c,r="";if(a=t.conf.debug?t.conf.jsonpath:t.conf.rooturl,o=t[n]&&t[n].url||t.conf[n]&&t.conf[n].url,!o)return console.log(n+"未配置路径信息，可conf中配置或者给sco."+n+".url赋值路径"),!1;if(a+=o+(t.conf.debug&&".json"),c=t[n]&&t[n].load||t.conf[n]&&t.conf[n].load,i=t[n]&&t[n].page||t.conf[n]&&t.conf[n].page,r=t[n]&&t[n].method||t.conf[n]&&t.conf[n].method,r=t.conf.debug?"GET":r,"function"==typeof t[n].before){var l=t[n].before(t);if(l===!1)return!1}c&&e.load(1);var u={method:r,url:a,headers:{"Content-Type":"application/x-www-form-urlencoded"}};"GET"==r?u.params=t[n].params||{}:u.data=t[n].params||{},t.$http(u).success(function(o){t.conf.console?console.log("接口调试信息，url:"+a,"参数params:",t[n].params,"返回re:",o):"",t[n].data={},1==o.code&&(t[n].data=o.data,i&&YS("laypage",function(){var e="#"+n;return 0==$(e).length?(console.log('未设置分页的id="'+n+'"的div容器'),!1):void laypage({cont:n,pages:o.data.pages,skin:"molv",first:1,curr:t[n].params.curPage||1,prev:"<",next:">",jump:function(e,a){a||(t[n].params.curPage=e.curr,t.fetch(n),t.$apply())}})})),"function"==typeof t[n].done&&t[n].done(o,t),c&&e.load(0)}).error(function(e){t.conf.console?console.log("模块："+n+"的接口"+a,"参数params:",t[n].params,"返回err:",e):"",YS("layer",function(){layer.msg("模块："+n+"的接口"+a+"网络超时！",{icon:0,time:2e3})})})},setstore:function(t,n){return n="object"==typeof n?JSON.stringify(n):n,localStorage.setItem(t,n),!0},getstore:function(t){var n="";try{n=localStorage.getItem(t),n=JSON.parse(n)}catch(e){n=localStorage.getItem(t)}return n},unsetstore:function(t){return localStorage.removeItem(t),!0},setCookie:function(t,n){var e=new Date;e.setTime(e.getTime()+6048e5);var a="expires="+e.toUTCString();document.cookie=t+"="+n+"; "+a},getCookie:function(t){for(var n=t+"=",e=document.cookie.split(";"),a=0;a<e.length;a++){for(var o=e[a];" "==o.charAt(0);)o=o.substring(1);if(o.indexOf(n)!=-1)return o.substring(n.length,o.length)}return""},delCookie:function(t){f.setCookie(t,"",-1)},getscope_byid:function(t,n){var e=t.$id==n?t:this.getscope_byid(t.$parent,n);return e}};return t.YSfac=e,e}(window);