!function(t,n){var e={rooturl:"meizi.lc/",tplpath:"./html",index:"./html/pageone.html",jsonpath:"./json/",debug:!0,console:!0,subfix:["a","b"]};$scope.com_lista={params:{},data:[],before:function(t){},done:function(t,n){}};var a={ctrl_init:function(t){t.com_lista.url="Open/prov",t.fetch("com_lista"),t.com_lista.done=function(t,n){n.fetch("com_listb")},t.com_listb.url="Open/city",t.com_listb.params={pid:17}},city:function(t){t.YS_obja.url="Index/edit_template"},mattertpl:function(t){t.YS_plista.url="Index/system_mattertpl_list",t.fetch("YS_plista"),t.com_add.url="Auth/comadd",t.com_add.url="Auth/comdel"},tongbiao:function(t){t.YS_lista.url="Index/major_select",t.fetch("YS_lista"),t.YS_obja.url="Index/major_add",t.YS_listb.url="Index/archive_select",t.fetch("YS_listb"),t.YS_objb.url="Index/archive_add"},weather:function(t){t.YS_plista.url="Index/service_weather_list"},userlist:function(t){t.YS_plista.url="Index/operate_user_list",t.fetch("YS_plista"),t.YS_plistb.page=!0,t.YS_plistb.url="Index/operate_login_list",t.YS_lista.url="Index/loginStatistic"},programcount:function(t){t.YS_plista.url="Index/operate_pro_list",t.fetch("YS_plista")}},o=angular.module("app",[]);o.filter("htmlfil",["$sce",function(t){return function(n){return t.trustAsHtml(n)}}]),o.controller("ctrl",["$scope","$http",function(n,o){n.conf=e,n.main=a,n.$http=o,n.value={},n.ystab=0,n.hrefinfo={url:"",path:"",hashobj:{}},n.com_del={params:{},data:{}},n.com_add={params:{},data:{}},e.subfix.map(function(t){n["com_obj"+t]={params:{},data:{}},n["com_list"+t]={params:{},data:[]},n["com_plist"+t]={page:!0,params:{listnum:10,curPage:1},data:{datalist:[]}},n["YS_list"+t]={params:{},data:[]},n["YS_plist"+t]={page:!0,params:{listnum:10,curPage:1},data:{datalist:[]}},n["YS_obj"+t]={params:{},data:{}}}),n.fetch=function(t){YSfac.fetdata(n,t)},n.dealhash=function(t,n){var a=t.split("#/");if(n.hrefinfo.url=e.index,a[1]){var o=a[1].split("?");n.hrefinfo.url=e.tplpath+"/"+o[0]+".html?time="+YSfac.time(),n.hrefinfo.path=o[0],o[1]&&(n.hrefinfo.hashobj=YSfac.hashToobj(o[1]))}},n.dealhash(location.href,n),n.init=function(t){e.subfix.map(function(n){t["YS_list"+n]={params:{},data:[]},t["YS_plist"+n]={page:!0,params:{listnum:10,curPage:1},data:{datalist:[]}},t["YS_obj"+n]={params:{},data:{}}}),a[t.hrefinfo.path]&&a[t.hrefinfo.path](t)},n.init(n),t.onhashchange=function(){n.dealhash(location.href,n),n.init(n),n.$apply()},a.ctrl_init(n),console.log(n)}]),o.directive("ysfetch",function(){return{link:function(t,n,e){n.on("click",function(n){var a=YSfac.getscope_byid(t,2);a.fetch(e.ysfetch)})}}}),o.directive("ysenter",function(){return{link:function(t,n,e){n.on("keyup",function(n){var a=YSfac.getscope_byid(t,2);13==n.keyCode&&a.fetch(e.ysenter)})}}}),o.directive("yschkall",function(){return{link:function(t,n,e){n.on("click",function(a){var o=YSfac.getscope_byid(t,2),i=e.yschkall.split("."),c=o;i.map(function(t){c=c[t]}),c.map(function(t){t.ischk=n.is(":checked")}),o.$apply()})}}}),o.directive("setvalue",function(){return{link:function(t,n,e){n.on("click",function(n){var a=YSfac.getscope_byid(t,2),o=e.setvalue.split("."),i=a,c="";o.map(function(t,n){n<o.length-1&&(i=i[t]),n==o.length-1&&(c=t)}),i[c]=e.value,a.$apply()})}}}),o.directive("ysaddrun",function(){return{link:function(t,n,e){n.on("click",function(n){var a=YSfac.getscope_byid(t,2),o=e.ysaddrun.split("."),i=a;o.map(function(t){i=i[t]}),a.com_add.done=function(t,n){1==t.code?(i.unshift(t.data),YS("layer",function(){layer.msg("成功")})):YS("layer",function(){layer.msg("失败")})},a.fetch("com_add")})}}}),o.directive("ysaddedit",function(){return{link:function(t,n,e){n.on("click",function(n){var a=YSfac.getscope_byid(t,2),o=e.ysadd.split("."),i=a;o.map(function(t){i=i[t]})})}}}),o.directive("ysselrun",function(){return{link:function(t,n,e){n.on("change",function(a){var o=YSfac.getscope_byid(t,2),i=e.ysselrun.split("."),c=o,r="";i.map(function(t,n){n<i.length-1&&(c=c[t]),n==i.length-1&&(r=t)}),c[r]=n.val(),o.fetch(i[0])})}}}),o.directive("yssel",function(){return{link:function(t,n,e){n.on("change",function(a){var o=YSfac.getscope_byid(t,2),i=e.yssel.split("."),c=o,r="";i.map(function(t,n){n<i.length-1&&(c=c[t]),n==i.length-1&&(r=t)}),c[r]=n.val()})}}}),o.directive("setystab",function(){return{link:function(t,n,e){n.on("click",function(n){var a=YSfac.getscope_byid(t,2);a.ystab=e.setystab,a.$apply()})}}}),o.directive("ysdel",function(){return{link:function(t,n,e){n.on("click",function(n){var a=YSfac.getscope_byid(t,2),o=e.ysdel.split("."),i=a;o.map(function(t){i=i[t]});var c=[];i.map(function(t){t.ischk&&c.push(t[e.delkey])}),YS("layer",function(){if(!c.length)return layer.msg("请选择删除项"),!1;var t=layer.confirm("您确定要删除么？",{btn:["确定","取消"]},function(){a.com_del.params[e.delkey]=c.join(","),a.com_del.done=function(t,n){1==t.code?(i.map(function(t){t.ischk&&(t.isdel=1)}),layer.msg("删除成功")):layer.msg("删除失败")},a.fetch("com_del"),layer.close(t)})})})}}}),o.directive("ysdelone",function(){return{link:function(t,n,e){n.on("click",function(n){var a=YSfac.getscope_byid(t,2),o=t;YS("layer",function(){var n=layer.confirm("您确定要删除么？",{btn:["确定","取消"]},function(){a.com_del.params[e.ysdelone]=t.value[e.ysdelone],a.com_del.done=function(t,n){1==t.code?(o.value.isdel=1,layer.msg("删除成功")):layer.msg("删除失败")},a.fetch("com_del"),layer.close(n)})})})}}}),o.directive("findtable",function(){return{link:function(t,n,e){n.on("click",function(n){var e=YSfac.getscope_byid(t,2);e.YS_listb.params.pid=t.value.pid,e.fetch("YS_listb"),e.ystab=2,e.$apply()})}}}),angular.element(document).ready(function(){angular.bootstrap(document,["app"])})}(window),function(t,n){var e={hashToobj:function(t){var n={};if(!t)return n;if(t.indexOf("&")>0){var e=t.split("&");e.map(function(t){var e=t.split("=");e.length>1?n[e[0]]=e[1]:""})}else{var a=t.split("=");a.length>1?n[a[0]]=a[1]:""}return n},time:function(t){var n=t?Date.parse(new Date(t)):Date.parse(new Date);return n},load:function(t){t?$("#loader").fadeIn(100):$("#loader").fadeOut(1e3)},fetdata:function(t,n){var a,o,i,c,r="";if(a=t.conf.debug?t.conf.jsonpath:t.conf.rooturl,o=t[n]&&t[n].url||t.conf[n]&&t.conf[n].url,!o)return console.log(n+"未配置路径信息，可conf中配置或者给sco."+n+".url赋值路径"),!1;if(a+=o+(t.conf.debug&&".json"),c=t[n]&&t[n].load||t.conf[n]&&t.conf[n].load,i=t[n]&&t[n].page||t.conf[n]&&t.conf[n].page,r=t[n]&&t[n].method||t.conf[n]&&t.conf[n].method||"GET",r=t.conf.debug?"GET":r,"function"==typeof t[n].before){var l=t[n].before(t);if(l===!1)return!1}c&&e.load(1);var s={method:r,url:a,headers:{"Content-Type":"application/x-www-form-urlencoded"}};"GET"==r?s.params=t[n].params||{}:s.data=t[n].params||{},t.$http(s).success(function(o){t.conf.console?console.log("接口调试信息，url:"+a,"参数params:",t[n].params,"返回re:",o):"",t[n].data={},1==o.code&&(t[n].data=o.data,i&&YS("laypage",function(){var e="#"+n;return 0==$(e).length?(console.log('未设置分页的id="'+n+'"的div容器'),!1):void laypage({cont:n,pages:o.data.pages,skin:"molv",first:1,curr:t[n].params.curPage||1,prev:"<",next:">",jump:function(e,a){a||(t[n].params.curPage=e.curr,t.fetch(n),t.$apply())}})})),"function"==typeof t[n].done&&t[n].done(o,t),c&&e.load(0)}).error(function(e){t.conf.console?console.log("模块："+n+"的接口"+a,"参数params:",t[n].params,"返回err:",e):"",YS("layer",function(){layer.msg("模块："+n+"的接口"+a+"网络超时！",{icon:0,time:2e3})})})},setstore:function(t,n){return n="object"==typeof n?JSON.stringify(n):n,localStorage.setItem(t,n),!0},getstore:function(t){var n="";try{n=localStorage.getItem(t),n=JSON.parse(n)}catch(e){n=localStorage.getItem(t)}return n},unsetstore:function(t){return localStorage.removeItem(t),!0},setCookie:function(t,n){var e=new Date;e.setTime(e.getTime()+6048e5);var a="expires="+e.toUTCString();document.cookie=t+"="+n+"; "+a},getCookie:function(t){for(var n=t+"=",e=document.cookie.split(";"),a=0;a<e.length;a++){for(var o=e[a];" "==o.charAt(0);)o=o.substring(1);if(o.indexOf(n)!=-1)return o.substring(n.length,o.length)}return""},delCookie:function(t){f.setCookie(t,"",-1)},getscope_byid:function(t,n){var e=t.$id==n?t:this.getscope_byid(t.$parent,n);return e}};return t.YSfac=e,e}(window);