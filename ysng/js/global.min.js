!function(t,e){var a={rooturl:"meizi.lc/",tplpath:"./html",index:"./html/pageone.html",jsonpath:"./json/",debug:!0,console:!0,com_del:{url:"auth/comdel",method:"POST",name:"POST方法-无分页列表"},com_add:{url:"auth/comadd",method:"POST",name:"POST方法-无分页列表"},com_lista:{url:"auth/comlist",method:"GET",name:"POST方法-无分页列表"},com_plista:{url:"auth/comlist",method:"GET",name:"GET方法-有分页列表",load:!0,page:!0},com_obja:{url:"auth/comadd",method:"GET",name:"GET方法-返回对象，如详情，添加，删除"},YS_lista:{url:"auth/comlist",method:"GET",name:"GET方法-无分页列表"},YS_plista:{url:"auth/comlist",method:"GET",name:"GET方法-有分页列表",load:!0,page:!0},YS_obja:{url:"auth/comadd",method:"POST",name:"POST方法-返回对象，如详情，添加，删除"}},n={ctrl_init:function(t){t.dealhash(location.href,t),t.init(t),t.com_lista.url="Open/prov",t.fetch("com_lista"),t.com_lista.done=function(t,e){e.fetch("com_listb")},t.com_listb.url="Open/city",t.com_listb.params={pid:17}},pageone:function(t){t.YS_lista.url="abc/aa",t.fetch("YS_plista"),t.fetch("com_listb")},city:function(t){},mattertpl:function(t){t.YS_plista.url="Index/system_mattertpl_list",t.fetch("YS_plista")},tongbiao:function(t){t.YS_lista.url="Index/major_select",t.fetch("YS_lista"),t.YS_listb.url="Index/archive_select",t.fetch("YS_listb")},weather:function(t){t.YS_lista.url="Index/service_weather_list",t.fetch("YS_lista")},userlist:function(t){t.YS_plista.url="Index/operate_user_list",t.YS_plista.params.userid=123,t.fetch("YS_plista"),t.YS_plistb.page=!0,t.YS_plistb.url="Index/operate_login_list",t.YS_lista.url="Index/loginStatistic"},programcount:function(t){t.YS_lista.url="Index/operate_pro_list",t.fetch("YS_lista")}},o=angular.module("app",[]);o.controller("ctrl",["$scope","$http",function(e,o){e.conf=a,e.main=n,e.$http=o,e.value={},e.body={url:"",path:"",hashobj:{}},e.com_del={params:{},data:{}},e.com_add={params:{},data:{}},["a","b","c","d"].map(function(t){e["com_obj"+t]={params:{},data:{}},e["com_list"+t]={params:{},data:[]},e["com_plist"+t]={params:{listnum:10,curPage:1},data:{datalist:[]}},e["YS_list"+t]={params:{},data:[]},e["YS_plist"+t]={params:{listnum:10,curPage:1},data:{datalist:[]}},e["YS_obj"+t]={params:{},data:{}}}),e.init=function(t){["a","b","c","d"].map(function(e){t["YS_list"+e]={params:{},data:[]},t["YS_plist"+e]={params:{listnum:10,curPage:1},data:{datalist:[]}},t["YS_obj"+e]={params:{},data:{}}}),n[t.body.path]&&n[t.body.path](t)},e.dealhash=function(t,e){var n=t.split("#/");if(e.body.url=a.index,n[1]){var o=n[1].split("?");e.body.url=a.tplpath+"/"+o[0]+".html?time="+YSfac.time(),e.body.path=o[0],o[1]&&(e.body.hashobj=YSfac.hashToobj(o[1]))}},e.fetch=function(t){YSfac.fetdata(e,t)},t.onhashchange=function(){e.dealhash(location.href,e),e.init(e),e.$apply()},n.ctrl_init(e),console.log(e)}]),o.directive("ysenter",function(){return{link:function(t,e,a){e.on("keyup",function(e){13==e.keyCode&&t.fetch(a.ysenter)})}}}),o.directive("yschkall",function(){return{link:function(t,e,a){e.on("click",function(n){var o=a.yschkall.split("."),i=t;o.map(function(t){i=i[t]}),i.map(function(t){t.ischk=e.is(":checked")}),t.$apply()})}}}),o.directive("ysadd",function(){return{link:function(t,e,a){e.on("click",function(e){var n=a.ysadd.split("."),o=t;n.map(function(t){o=o[t]}),t.com_add.done=function(t,e){1==t.code?(o.push(t.data),e.$apply(),layer.msg("成功")):layer.msg("失败")},t.fetch("com_add")})}}}),o.directive("ysselrun",function(){return{link:function(t,e,a){e.on("change",function(n){var o=a.ysselrun.split("."),i=t,c="";o.map(function(t,e){e<o.length-1&&(i=i[t]),e==o.length-1&&(c=t)}),i[c]=e.val(),t.fetch(o[0])})}}}),o.directive("yssel",function(){return{link:function(t,e,a){e.on("change",function(n){var o=a.ysselrun.split("."),i=t,c="";o.map(function(t,e){e<o.length-1&&(i=i[t]),e==o.length-1&&(c=t)}),i[c]=e.val()})}}}),o.directive("ysdel",function(){return{link:function(t,e,a){e.on("click",function(e){var n=a.ysdel.split("."),o=t;n.map(function(t){o=o[t]});var i=[];o.map(function(t){t.ischk&&i.push(t[a.delkey])}),YS("layer",function(){if(!i.length)return layer.msg("请选择删除项"),!1;var e=layer.confirm("您确定要删除么？",{btn:["确定","取消"]},function(){t.com_del.params[a.delkey]=i.join(","),t.com_del.done=function(t,e){1==t.code?(o.map(function(t){t.ischk&&(t.isdel=1)}),layer.msg("删除成功")):layer.msg("删除失败")},t.fetch("com_del"),layer.close(e)})})})}}}),o.directive("ysdelone",function(){return{link:function(t,e,a){e.on("click",function(e){var n=t;YS("layer",function(){var e=layer.confirm("您确定要删除么？",{btn:["确定","取消"]},function(){t.com_del.params[a.ysdelone]=t.value[a.ysdelone],t.com_del.done=function(t,e){1==t.code?(n.value.isdel=1,layer.msg("删除成功")):layer.msg("删除失败")},t.fetch("com_del"),layer.close(e)})})})}}}),angular.element(document).ready(function(){angular.bootstrap(document,["app"])})}(window),function(t,e){var a={hashToobj:function(t){var e={};if(!t)return e;if(t.indexOf("&")>0){var a=t.split("&");a.map(function(t){var a=t.split("=");a.length>1?e[a[0]]=a[1]:""})}else{var n=t.split("=");n.length>1?e[n[0]]=n[1]:""}return e},time:function(t){var e=t?Date.parse(new Date(t)):Date.parse(new Date);return e},load:function(t){t?$("#loader").fadeIn(100):$("#loader").fadeOut(1e3)},fetdata:function(t,e){var n,o,i,c,l="";if(n=t.conf.debug?t.conf.jsonpath:t.conf.rooturl,o=t[e]&&t[e].url||t.conf[e]&&t.conf[e].url,!o)return console.log(e+"未配置路径信息，可conf中配置或者给sco."+e+".url赋值路径"),!1;if(n+=o+(t.conf.debug&&".json"),c=t[e]&&t[e].load||t.conf[e]&&t.conf[e].load,i=t[e]&&t[e].page||t.conf[e]&&t.conf[e].page,l=t[e]&&t[e].method||t.conf[e]&&t.conf[e].method,l=t.conf.debug?"GET":l,"function"==typeof t[e].before){var r=t[e].before(t);if(r===!1)return!1}c&&a.load(1);var s={method:l,url:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}};"GET"==l?s.params=t[e].params||{}:s.data=t[e].params||{},t.$http(s).success(function(o){t.conf.console?console.log("接口调试信息，url:"+n,"参数params:",t[e].params,"返回re:",o):"",t[e].data={},1==o.code&&(t[e].data=o.data,i&&YS("laypage",function(){var a="#"+e;return 0==$(a).length?(console.log('未设置分页的id="'+e+'"的div容器'),!1):void laypage({cont:e,pages:o.data.pages,skin:"molv",first:1,curr:t[e].params.curPage||1,prev:"<",next:">",jump:function(a,n){n||(t[e].params.curPage=a.curr,t.fetch(e),t.$apply())}})})),"function"==typeof t[e].done&&t[e].done(o,t),c&&a.load(0)}).error(function(a){t.conf.console?console.log("模块："+e+"的接口"+n,"参数params:",t[e].params,"返回err:",a):"",YS("layer",function(){layer.msg("模块："+e+"的接口"+n+"网络超时！",{icon:0,time:2e3})})})},setstore:function(t,e){return e="object"==typeof e?JSON.stringify(e):e,localStorage.setItem(t,e),!0},getstore:function(t){var e="";try{e=localStorage.getItem(t),e=JSON.parse(e)}catch(a){e=localStorage.getItem(t)}return e},unsetstore:function(t){return localStorage.removeItem(t),!0},setCookie:function(t,e){var a=new Date;a.setTime(a.getTime()+6048e5);var n="expires="+a.toUTCString();document.cookie=t+"="+e+"; "+n},getCookie:function(t){for(var e=t+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var o=a[n];" "==o.charAt(0);)o=o.substring(1);if(o.indexOf(e)!=-1)return o.substring(e.length,o.length)}return""},delCookie:function(t){f.setCookie(t,"",-1)}};return t.YSfac=a,a}(window);